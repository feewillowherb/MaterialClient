<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:MaterialClient.ViewModels"
             xmlns:semi="https://irihi.tech/semi"
             xmlns:u-semi="https://irihi.tech/ursa/themes/semi"
             xmlns:u="https://irihi.tech/ursa"
             x:Class="MaterialClient.Views.MaterialsSelectionPopup"
             x:DataType="vm:MaterialsSelectionPopupViewModel"
             Width="600" Height="400">
    
    <Border Background="White"
            BorderBrush="#E5E7EB"
            BorderThickness="1"
            CornerRadius="4">
        <Grid RowDefinitions="50,*,50">
            
            <!-- 搜索框区域 -->
            <Border Grid.Row="0"
                    Background="White"
                    BorderBrush="#000000"
                    BorderThickness="0,0,0,1"
                    Height="50">
                <TextBox Width="598"
                         Height="35"
                         FontSize="18"
                         Watermark="输入关键字查找"
                         BorderThickness="0"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"
                         Text="{Binding SearchText, Mode=TwoWay}" />
            </Border>
            
            <!-- DataGrid 区域 -->
            <Border Grid.Row="1"
                    BorderBrush="#E5E7EB"
                    BorderThickness="0,0,0,1"
                    Background="White">
                <DataGrid Width="599"
                          Height="300"
                          AutoGenerateColumns="False"
                          CanUserResizeColumns="False"
                          CanUserSortColumns="False"
                          IsReadOnly="True"
                          SelectionMode="Single"
                          HorizontalAlignment="Left"
                          BorderThickness="0"
                          Background="White"
                          GridLinesVisibility="Horizontal"
                          HeadersVisibility="Column"
                          RowHeight="30"
                          ItemsSource="{Binding PagedMaterials}"
                          SelectedItem="{Binding SelectedMaterial, Mode=TwoWay}">
                    
                    <!-- DataGrid 局部样式，覆盖全局样式 -->
                    <DataGrid.Styles>
                        <!-- 列头样式 -->
                        <Style Selector="DataGridColumnHeader">
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="Foreground" Value="#000000" />
                            <Setter Property="FontSize" Value="14" />
                            <Setter Property="Height" Value="35" />
                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                            <Setter Property="VerticalContentAlignment" Value="Center" />
                            <Setter Property="HorizontalAlignment" Value="Center" />
                            <Setter Property="BorderThickness" Value="0" />
                        </Style>
                        
                        <!-- 行样式 -->
                        <Style Selector="DataGridRow">
                            <Setter Property="Background" Value="White" />
                        </Style>
                        <Style Selector="DataGridRow:pointerover">
                            <Setter Property="Background" Value="#D8E5FF" />
                            <Setter Property="Foreground" Value="Black" />
                        </Style>
                        
                        <!-- 单元格样式 -->
                        <Style Selector="DataGridCell">
                            <Setter Property="BorderThickness" Value="0" />
                            <Setter Property="BorderBrush" Value="#6498FE" />
                            <Setter Property="Foreground" Value="Black" />
                            <Setter Property="HorizontalContentAlignment" Value="Center" />
                            <Setter Property="VerticalContentAlignment" Value="Center" />
                        </Style>
                        <Style Selector="DataGridCell:pointerover">
                            <Setter Property="Background" Value="#D8E5FF" />
                            <Setter Property="Foreground" Value="Black" />
                        </Style>
                        <Style Selector="DataGridRow:selected DataGridCell">
                            <Setter Property="Background" Value="#6498FE" />
                            <Setter Property="Foreground" Value="White" />
                        </Style>
                        
                        <!-- 单元格内 TextBlock 样式 -->
                        <Style Selector="DataGridCell TextBlock">
                            <Setter Property="FontSize" Value="25" />
                            <Setter Property="HorizontalAlignment" Value="Center" />
                            <Setter Property="VerticalAlignment" Value="Center" />
                        </Style>
                    </DataGrid.Styles>
                    
                    <DataGrid.Columns>
                        <DataGridTextColumn Width="*"
                                           IsReadOnly="True"
                                           CanUserSort="False"
                                           Binding="{Binding Name}">
                            <DataGridTextColumn.Header>
                                <TextBlock FontSize="18" Text="名称" />
                            </DataGridTextColumn.Header>
                        </DataGridTextColumn>
                        
                        <DataGridTextColumn Width="120"
                                           IsReadOnly="True"
                                           CanUserSort="False"
                                           Binding="{Binding Specifications}">
                            <DataGridTextColumn.Header>
                                <TextBlock FontSize="18" Text="规格型号" />
                            </DataGridTextColumn.Header>
                        </DataGridTextColumn>
                        
                        <DataGridTextColumn Width="100"
                                           IsReadOnly="True"
                                           CanUserSort="False"
                                           Binding="{Binding UnitName}">
                            <DataGridTextColumn.Header>
                                <TextBlock FontSize="18" Text="单位" />
                            </DataGridTextColumn.Header>
                        </DataGridTextColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>
            
            <!-- 分页控件区域 -->
            <Grid Grid.Row="2"
                  Height="50"
                  VerticalAlignment="Center"
                  Margin="10,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                
                <!-- 分页信息 -->
                <StackPanel Grid.Column="0"
                           Orientation="Horizontal"
                           VerticalAlignment="Center">
                    <TextBlock Text="{Binding CurrentPageInfo}"
                               FontSize="14"
                               VerticalAlignment="Center"
                               Margin="0,0,10,0" />
                    <TextBlock Text="{Binding TotalCountInfo}"
                               FontSize="14"
                               VerticalAlignment="Center" />
                </StackPanel>
                
                <!-- Ursa 分页组件 -->
                <u:Pagination Grid.Column="1"
                              CurrentPage="{Binding CurrentPage, Mode=TwoWay}"
                              TotalCount="{Binding TotalCount}"
                              PageSize="{Binding PageSize}"
                              Command="{Binding PageChangeCommand}" />
            </Grid>
        </Grid>
    </Border>
</UserControl>

