<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:MaterialClient.ViewModels"
        mc:Ignorable="d" d:DesignWidth="1080" d:DesignHeight="640"
        x:Class="MaterialClient.Views.LoginWindow"
        x:DataType="vm:LoginWindowViewModel"
        Title="凡东智能物料验收系统"
        Width="1080"
        Height="640"
        CanResize="False"
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        TransparencyLevelHint="None"
        Icon="/Assets/fd-ico.ico">
    
    <Design.DataContext>
        <vm:LoginWindowViewModel />
    </Design.DataContext>

    <Grid>
        <!-- Main Border with Rounded Corners -->
        <Border BorderBrush="Gray" 
                BorderThickness="1" 
                CornerRadius="15" 
                Background="White"/>
        
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="540"/>
                <ColumnDefinition Width="540"/>
            </Grid.ColumnDefinitions>
            
            <!-- Left Panel with Image -->
            <Grid Grid.Column="0">
                <Image Source="/Assets/login-left.png" 
                       Stretch="UniformToFill"
                       Width="540"/>
            </Grid>
            
            <!-- Right Panel with Login Form -->
            <Grid Grid.Column="1">
                <StackPanel Orientation="Vertical">
                    <!-- Close Button -->
                    <Button Content="×"
                            Classes="transparent-button"
                            FontSize="60"
                            Foreground="#CCCCCC"
                            HorizontalAlignment="Right"
                            Height="54"
                            Width="54"
                            Click="OnCloseButtonClick"
                            Cursor="Hand"/>
                    
                    <!-- Logo and Title -->
                    <StackPanel Orientation="Horizontal" 
                               HorizontalAlignment="Center"
                               Margin="0,50,0,50">
                        <Image Source="/Assets/fd-ico.ico" 
                               Width="44" 
                               Margin="0,0,8,0"/>
                        <StackPanel Margin="0,-1,0,0">
                            <TextBlock Text="凡东智能物料验收系统"
                                      FontSize="24"
                                      HorizontalAlignment="Center"
                                      Margin="0,0,0,5"/>
                            <TextBlock Text="MATERIAL ACCEPTANCE CHECK SYSTEM"
                                      FontSize="12"
                                      HorizontalAlignment="Center"
                                      Margin="0,3,0,0"
                                      Foreground="#888"/>
                        </StackPanel>
                    </StackPanel>
                    
                    <!-- Username Input -->
                    <TextBlock Text="账号" 
                              Width="350" 
                              Margin="0,0,0,5"
                              FontSize="14"/>
                    <TextBox x:Name="UsernameTextBox"
                             Text="{Binding Username}"
                             Watermark="请输入手机号/账号"
                             Height="56"
                             Width="350"
                             Margin="0,10,0,20"
                             Padding="10,4,0,0"
                             FontSize="14"
                             VerticalContentAlignment="Center"
                             IsEnabled="{Binding !IsLoggingIn}"/>
                    
                    <!-- Password Input -->
                    <TextBlock Text="密码" 
                              Width="350" 
                              Margin="0,0,0,5"
                              FontSize="14"/>
                    <TextBox x:Name="PasswordTextBox"
                             Text="{Binding Password}"
                             Watermark="请输入您的密码"
                             PasswordChar="●"
                             Height="56"
                             Width="350"
                             Margin="0,10,0,20"
                             Padding="10,4,0,0"
                             FontSize="14"
                             VerticalContentAlignment="Center"
                             IsEnabled="{Binding !IsLoggingIn}"/>
                    
                    <!-- Error Message -->
                    <TextBlock Text="{Binding ErrorMessage}"
                              Foreground="#F44336"
                              FontSize="12"
                              Width="350"
                              TextAlignment="Center"
                              Margin="0,0,0,10"
                              TextWrapping="Wrap"
                              IsVisible="{Binding HasError}"/>
                    
                    <!-- Loading Indicator -->
                    <StackPanel Orientation="Horizontal" 
                               HorizontalAlignment="Center"
                               Width="350"
                               IsVisible="{Binding IsLoggingIn}"
                               Margin="0,0,0,10">
                        <TextBlock Text="正在登录..."
                                  FontSize="12"
                                  Foreground="#4C82FC"/>
                    </StackPanel>
                    
                    <!-- Login Button -->
                    <Button Content="立即登录"
                            Command="{Binding LoginCommand}"
                            Classes="primary-button"
                            Width="350"
                            Height="56"
                            FontSize="18"
                            Margin="0,20,0,0"
                            HorizontalAlignment="Center"
                            HorizontalContentAlignment="Center"
                            IsEnabled="{Binding !IsLoggingIn}"
                            Cursor="Hand"/>
                    
                    <!-- Remember Me CheckBox -->
                    <CheckBox Content="记住密码"
                             IsChecked="{Binding RememberMe}"
                             Width="350"
                             Margin="0,15,0,0"
                             FontSize="12"
                             HorizontalAlignment="Center"
                             Padding="4,0,0,0"
                             Height="20"
                             IsEnabled="{Binding !IsLoggingIn}"/>
                    
                    <!-- Retry Button for Network Errors -->
                    <Button Content="重试"
                            Command="{Binding RetryCommand}"
                            Classes="warning-button"
                            Width="350"
                            Height="40"
                            FontSize="14"
                            Margin="0,10,0,0"
                            HorizontalAlignment="Center"
                            IsVisible="{Binding ShowRetryButton}"
                            Cursor="Hand"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Grid>
</Window>

