<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:MaterialClient.ViewModels"
             xmlns:converters="using:MaterialClient.Converters"
             x:Class="MaterialClient.Views.PhotoGridView"
             x:DataType="vm:PhotoGridViewModel">
  
  <UserControl.Resources>
    <converters:CarNullOrEmptyImageConverter x:Key="CarNullOrEmptyImageConverter"/>
    <converters:BoolToBrushConverter x:Key="BoolToBrushConverter"/>
  </UserControl.Resources>
  
  <Grid RowDefinitions="Auto,*">
    <!-- Camera Tabs -->
    <Border Classes="card-border" 
            CornerRadius="8,8,0,0" 
            BorderThickness="1,1,1,0">
      <UniformGrid Rows="1" Columns="2">
        <Button Content="进场照片" 
                CornerRadius="8,0,0,0"
                Padding="32,12"
                FontSize="14"
                BorderThickness="0"
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Center"
                Command="{Binding ShowEntryPhotosCommand}"
                Foreground="{Binding IsEntryPhotoTabSelected, Converter={StaticResource BoolToBrushConverter}, ConverterParameter='White|#666666'}"
                Background="{Binding IsEntryPhotoTabSelected, Converter={StaticResource BoolToBrushConverter}, ConverterParameter='#4169E1|White'}"/>
        <Button Content="出场照片" 
                CornerRadius="0,8,0,0"
                Padding="32,12"
                FontSize="14"
                BorderThickness="0"
                HorizontalAlignment="Stretch"
                HorizontalContentAlignment="Center"
                Command="{Binding ShowExitPhotosCommand}"
                Foreground="{Binding IsExitPhotoTabSelected, Converter={StaticResource BoolToBrushConverter}, ConverterParameter='White|#666666'}"
                Background="{Binding IsExitPhotoTabSelected, Converter={StaticResource BoolToBrushConverter}, ConverterParameter='#4169E1|White'}"/>
      </UniformGrid>
    </Border>
    
    <!-- Camera Grid -->
    <Border Grid.Row="1" 
            Classes="card-border"
            BorderThickness="1,0,1,1"
            CornerRadius="0,0,8,8"
            Padding="16"
            Height="280">
      <Grid>
        <!-- 进场照片 Grid -->
        <Grid RowDefinitions="*,*" 
              ColumnDefinitions="*,*"
              RowSpacing="8"
              ColumnSpacing="8"
              IsVisible="{Binding IsEntryPhotoTabSelected}">
          <Button Background="Transparent" 
                  BorderThickness="0" 
                  Padding="0"
                  Command="{Binding OpenImageViewerCommand}"
                  CommandParameter="{Binding EntryPhoto1}">
            <Border Background="#E5E7EB" CornerRadius="4">
              <Image Source="{Binding EntryPhoto1, Converter={StaticResource CarNullOrEmptyImageConverter}}" Stretch="UniformToFill"/>
            </Border>
          </Button>
          <Button Grid.Column="1"
                  Background="Transparent" 
                  BorderThickness="0" 
                  Padding="0"
                  Command="{Binding OpenImageViewerCommand}"
                  CommandParameter="{Binding EntryPhoto2}">
            <Border Background="#E5E7EB" CornerRadius="4">
              <Image Source="{Binding EntryPhoto2, Converter={StaticResource CarNullOrEmptyImageConverter}}" Stretch="UniformToFill"/>
            </Border>
          </Button>
          <Button Grid.Row="1"
                  Background="Transparent" 
                  BorderThickness="0" 
                  Padding="0"
                  Command="{Binding OpenImageViewerCommand}"
                  CommandParameter="{Binding EntryPhoto3}">
            <Border Background="#E5E7EB" CornerRadius="4">
              <Image Source="{Binding EntryPhoto3, Converter={StaticResource CarNullOrEmptyImageConverter}}" Stretch="UniformToFill"/>
            </Border>
          </Button>
          <Button Grid.Row="1" Grid.Column="1"
                  Background="Transparent" 
                  BorderThickness="0" 
                  Padding="0"
                  Command="{Binding OpenImageViewerCommand}"
                  CommandParameter="{Binding EntryPhoto4}">
            <Border Background="#E5E7EB" CornerRadius="4">
              <Image Source="{Binding EntryPhoto4, Converter={StaticResource CarNullOrEmptyImageConverter}}" Stretch="UniformToFill"/>
            </Border>
          </Button>
        </Grid>
        
        <!-- 出场照片 Grid -->
        <Grid RowDefinitions="*,*" 
              ColumnDefinitions="*,*"
              RowSpacing="8"
              ColumnSpacing="8"
              IsVisible="{Binding IsExitPhotoTabSelected}">
          <Button Background="Transparent" 
                  BorderThickness="0" 
                  Padding="0"
                  Command="{Binding OpenImageViewerCommand}"
                  CommandParameter="{Binding ExitPhoto1}">
            <Border Background="#E5E7EB" CornerRadius="4">
              <Image Source="{Binding ExitPhoto1, Converter={StaticResource CarNullOrEmptyImageConverter}}" Stretch="UniformToFill"/>
            </Border>
          </Button>
          <Button Grid.Column="1"
                  Background="Transparent" 
                  BorderThickness="0" 
                  Padding="0"
                  Command="{Binding OpenImageViewerCommand}"
                  CommandParameter="{Binding ExitPhoto2}">
            <Border Background="#E5E7EB" CornerRadius="4">
              <Image Source="{Binding ExitPhoto2, Converter={StaticResource CarNullOrEmptyImageConverter}}" Stretch="UniformToFill"/>
            </Border>
          </Button>
          <Button Grid.Row="1"
                  Background="Transparent" 
                  BorderThickness="0" 
                  Padding="0"
                  Command="{Binding OpenImageViewerCommand}"
                  CommandParameter="{Binding ExitPhoto3}">
            <Border Background="#E5E7EB" CornerRadius="4">
              <Image Source="{Binding ExitPhoto3, Converter={StaticResource CarNullOrEmptyImageConverter}}" Stretch="UniformToFill"/>
            </Border>
          </Button>
          <Button Grid.Row="1" Grid.Column="1"
                  Background="Transparent" 
                  BorderThickness="0" 
                  Padding="0"
                  Command="{Binding OpenImageViewerCommand}"
                  CommandParameter="{Binding ExitPhoto4}">
            <Border Background="#E5E7EB" CornerRadius="4">
              <Image Source="{Binding ExitPhoto4, Converter={StaticResource CarNullOrEmptyImageConverter}}" Stretch="UniformToFill"/>
            </Border>
          </Button>
        </Grid>
      </Grid>
    </Border>
  </Grid>
</UserControl>
