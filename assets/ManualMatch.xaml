<Window x:Class="FdSoft.Material.WpfClient.AutoWeight.AutoWeightMatchV2"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:hc="https://handyorg.github.io/handycontrol"
        xmlns:local="clr-namespace:FdSoft.Material.WpfClient.AutoWeight" xmlns:vm="clr-namespace:FdSoft.Material.WpfClient.ViewModel"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance vm:AutoWeightMatchViewModelV2}"
        Title="订单匹配" Height="700" Width="740" ResizeMode="NoResize" WindowStyle="None" Background="White"  AllowsTransparency="True" >
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/HandyControl;component/Themes/SkinDefault.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/HandyControl;component/Themes/Theme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Border BorderBrush="LightGray" BorderThickness="1">
        <Grid>
            <GroupItem Grid.Column="0" Grid.ColumnSpan="3" Grid.RowSpan="2" Background="Transparent">
                <DockPanel Height="50" Width="740"   VerticalAlignment="Top" HorizontalAlignment="Left" Background="#FF6498FE">
                    <TextBlock Name="txtTitle" Margin="15,0,0,0"  Padding="5,3,2,3" Text="订单数据匹配" FontSize="14" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                    <Button Click="btn_close_Click" Height="35" HorizontalAlignment="Right" Background="{x:Null}" BorderBrush="Transparent">
                        <TextBlock FontSize="30" Foreground="White" HorizontalAlignment="Left" VerticalAlignment="Center"><Run Text="×"/></TextBlock>
                    </Button>
                </DockPanel>
            </GroupItem>
            <hc:Row Margin="0,50,0,0" VerticalAlignment="Top">
                <hc:Col>
                    <TextBlock Text="当前订单信息" VerticalAlignment="Center" Margin="10,5,2,5" HorizontalAlignment="Left" FontSize="14"  Foreground="Black"/>
                </hc:Col>
            </hc:Row>
            <Border Background="#f2f2f2" VerticalAlignment="Top" HorizontalAlignment="Center" Height="280" Margin="0,80,0,0" Width="720">
            <hc:Row VerticalAlignment="Top">
                <hc:Col Span="24">
                        <hc:UniformSpacingPanel Orientation="Vertical" Margin="0" >
                            <hc:Row>
                                <hc:Col Span="12">
                                    <hc:UniformSpacingPanel Orientation="Horizontal" Margin="0" >
                                        <TextBlock Text="车牌号：" VerticalAlignment="Center" Margin="10,5,2,5" HorizontalAlignment="Left" FontSize="14"  Foreground="Black"/>
                                        <TextBlock Text="{Binding OrderModel.TruckNo}" VerticalAlignment="Center" Margin="10,5,2,5" HorizontalAlignment="Left" FontSize="14"  Foreground="Black"/>
                                    </hc:UniformSpacingPanel>
                                </hc:Col>
                                <hc:Col Span="12">
                                    <hc:UniformSpacingPanel Orientation="Horizontal" Margin="0" >
                                        <TextBlock Text="供料单位：" VerticalAlignment="Center" Margin="10,5,2,5" HorizontalAlignment="Left" FontSize="14"  Foreground="Black"/>
                                        <TextBlock Text="{Binding OrderModel.ProviderName}" VerticalAlignment="Center" Margin="10,5,2,5" HorizontalAlignment="Left" FontSize="14"  Foreground="Black"/>
                                    </hc:UniformSpacingPanel>
                                </hc:Col>
                            </hc:Row>
                            <hc:Row>
                                <hc:Col Span="12">
                                    <hc:UniformSpacingPanel Orientation="Horizontal" Margin="0" >
                                        <TextBlock Text="车辆重量（吨）：" VerticalAlignment="Center" Margin="10,5,2,5" HorizontalAlignment="Left" FontSize="14"  Foreground="Black"/>
                                        <TextBlock Text="{Binding OrderModel.TotalWeight}" VerticalAlignment="Center" Margin="10,5,2,5" HorizontalAlignment="Left" FontSize="14"  Foreground="Black"/>
                                    </hc:UniformSpacingPanel>
                                </hc:Col>
                                <hc:Col Span="12">
                                    <hc:UniformSpacingPanel Orientation="Horizontal" Margin="0" >
                                        <TextBlock Text="进场时间：" VerticalAlignment="Center" Margin="10,5,2,5" HorizontalAlignment="Left" FontSize="14"  Foreground="Black"/>
                                        <TextBlock Text="{Binding OrderModel.JoinTime,StringFormat='{}{0:yyyy-MM-dd HH:mm:ss}'}" VerticalAlignment="Center" Margin="10,5,2,5" HorizontalAlignment="Left" FontSize="14"  Foreground="Black"/>
                                    </hc:UniformSpacingPanel>
                                </hc:Col>
                            </hc:Row>
                            <hc:Row Height="110">
                                <hc:Col Span="4">
                                    <TextBlock Text="进场照片：" VerticalAlignment="Center" Margin="10,5,2,5" HorizontalAlignment="Left" FontSize="14"  Foreground="Black"/>
                                </hc:Col>
                                <hc:Col Span="20" Height="110">
                                    <hc:UniformSpacingPanel Orientation="Horizontal"  Height="110">
                                        <Image Stretch="Fill" Height="100" Width="140" Margin="5" Source="{Binding ImageSources[0]}"  MouseDown="img_MouseDown"  x:Name="img_JoinPic_0" />
                                        <Image Stretch="Fill" Height="100" Width="140" Margin="5" Source="{Binding ImageSources[1]}"  MouseDown="img_MouseDown"  x:Name="img_JoinPic_1" />
                                        <Image Stretch="Fill" Height="100" Width="140" Margin="5" Source="{Binding ImageSources[2]}"  MouseDown="img_MouseDown"  x:Name="img_JoinPic_2" />
                                        <Image Stretch="Fill" Height="100" Width="140" Margin="5" Source="{Binding ImageSources[3]}"  MouseDown="img_MouseDown"  x:Name="img_JoinPic_3" />
                                    </hc:UniformSpacingPanel>
                                </hc:Col>
                            </hc:Row>
                            <hc:Row Height="110">
                                <hc:Col Span="4">
                                    <TextBlock Text="运单照片：" VerticalAlignment="Center" Margin="10,5,2,5" HorizontalAlignment="Left" FontSize="14"  Foreground="Black"/>
                                </hc:Col>
                                <hc:Col Span="20" Height="110">
                                    <hc:UniformSpacingPanel Orientation="Horizontal"  Height="110">
                                        <Image Stretch="Fill" Height="100" Width="140" Margin="5" Source="{Binding PiaoJuImage}"  MouseDown="img_MouseDown"  x:Name="img_Piaoju" />
                                    </hc:UniformSpacingPanel>
                                </hc:Col>
                            </hc:Row>
                        </hc:UniformSpacingPanel>
                    </hc:Col>
            </hc:Row>
            </Border>
            <hc:Row Margin="0,360,0,0" VerticalAlignment="Top">
                <hc:Col>
                    <TextBlock Text="可匹配订单信息" VerticalAlignment="Center" Margin="10,5,2,5" HorizontalAlignment="Left" FontSize="14"  Foreground="Black"/>
                </hc:Col>
            </hc:Row>
            <hc:Row Height="200" Margin="5,385,5,5" VerticalAlignment="Top">
                <hc:Col Span="24" Margin="0">
                    <ListView ItemsSource="{Binding OrderList}"  SelectionMode="Single" Style="{StaticResource ListViewBaseStyle}" SelectionChanged="SelectedItemClick" SelectedItem="{Binding SelectedItemData}"  MaxWidth="720" Width="720" FontSize="14" Height="200"   HorizontalAlignment="Center">
                        <ListView.View>
                            <GridView>
                                <GridViewColumn Width="Auto" Header="车牌号" DisplayMemberBinding="{Binding TruckNo}" />
                                <GridViewColumn Width="Auto" Header="供料单位" DisplayMemberBinding="{Binding ProviderName}" />
                                <GridViewColumn Width="Auto" Header="车辆重量（吨）" DisplayMemberBinding="{Binding TotalWeight}" />
                                <GridViewColumn Width="Auto" Header="进场时间" DisplayMemberBinding="{Binding JoinTime,StringFormat='{}{0:yyyy-MM-dd HH:mm:ss}'}" />
                                <GridViewColumn Width="Auto" Header="相隔时间" DisplayMemberBinding="{Binding SeparatedTime}" />
                                <GridViewColumn Width="280" Header="操作">
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" Margin="0">
                                                <Button Content="查看详情"   Command="{Binding Path=DataContext.ShowDetailClick,RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type ItemsControl}}}" CommandParameter="{Binding}"  Style="{StaticResource MaterialDesignFlatButton}" Foreground="#40a9ff"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>
                            </GridView>
                        </ListView.View>
                    </ListView>
                </hc:Col>
            </hc:Row>

            <hc:Row Height="45" VerticalAlignment="Bottom"  Margin="0,0,0,50">
                <hc:Col Span="24" Margin="0">
                    <hc:Pagination MaxPageCount="{Binding OrderParam.PageParam.MaxPageCount}" Height="45" Margin="5"  PageIndex="{Binding OrderParam.PageParam.PageIndex}" DataCountPerPage="{Binding OrderParam.PageParam.DataCountPerPage}" IsJumpEnabled="True">
                        <hc:Interaction.Triggers>
                            <hc:EventTrigger EventName="PageUpdated">
                                <hc:EventToCommand Command="{Binding OrderPageUpdated}" PassEventArgsToCommand="True" />
                            </hc:EventTrigger>
                        </hc:Interaction.Triggers>
                    </hc:Pagination>
                </hc:Col>
            </hc:Row>
            <Border>
                <hc:Row Height="50" Margin="0"  VerticalAlignment="Bottom">
                    <hc:Col Span="12">
                        <Button Content="取消" Margin="10" Click="btn_close_Click"  HorizontalAlignment="Right" Width="70" />
                    </hc:Col>
                    <hc:Col Span="12">
                        <Button Content="确定" Margin="10" Click="btn_ok_Click"   HorizontalAlignment="Left"  Width="70" Style="{StaticResource ButtonPrimary}"/>
                    </hc:Col>
                </hc:Row>
            </Border>
        </Grid>
    </Border>
</Window>
