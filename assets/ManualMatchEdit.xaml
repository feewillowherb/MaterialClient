<Window x:Class="FdSoft.Material.WpfClient.AutoWeight.AutoWeightMatchEditV2"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:hc="https://handyorg.github.io/handycontrol"
        xmlns:local="clr-namespace:FdSoft.Material.WpfClient.AutoWeight" xmlns:aforge="clr-namespace:AForge.Controls;assembly=AForge.Controls"
        mc:Ignorable="d" xmlns:vm="clr-namespace:FdSoft.Material.WpfClient.ViewModel"
         d:DataContext="{d:DesignInstance vm:AutoWeightMatchEditViewModelV2}"
         Title="订单匹配确认" Height="768" Width="755" ResizeMode="NoResize" WindowStyle="None" Background="White"  AllowsTransparency="False" Loaded="LoadClick" MouseDown="window_MouseDown">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/HandyControl;component/Themes/SkinDefault.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/HandyControl;component/Themes/Theme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Border BorderBrush="LightGray" BorderThickness="1">
        <Grid>
            <GroupItem Grid.Column="0" Grid.ColumnSpan="3" Grid.RowSpan="2" Background="Transparent">
                <DockPanel Height="50" Width="755"   VerticalAlignment="Top" HorizontalAlignment="Left" Background="#FF6498FE">
                    <TextBlock Name="txtTitle" Margin="15,0,0,0"  Padding="5,3,2,3" Text="订单匹配确认" FontSize="14" Foreground="White" VerticalAlignment="Center" HorizontalAlignment="Left"/>
                    <Button Click="btn_close_Click" Height="35" HorizontalAlignment="Right" Background="{x:Null}" BorderBrush="Transparent">
                        <TextBlock FontSize="30" Foreground="White" HorizontalAlignment="Left" VerticalAlignment="Center"><Run Text="×"/></TextBlock>
                    </Button>
                </DockPanel>
            </GroupItem>
            <ScrollViewer  Margin="5,55,5,5 " VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Auto" Name="scrollv" >
                <StackPanel Width="745" >
                    <hc:Row Height="30" Margin="5" >
                        <hc:Col Span="12">
                            <hc:TextBox Text="{Binding OrderMatchParam.TruckNo}"  Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="300" hc:InfoElement.TitleWidth="80" hc:InfoElement.Placeholder="请输入车牌号" hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="车牌号：" hc:InfoElement.Necessary="True"  Margin="0"/>
                        </hc:Col>
                        <hc:Col Span="12">
                            <hc:ComboBox SelectedValuePath="Key" DisplayMemberPath="Value" SelectionChanged="ProviderSelected" SelectedItem="{Binding OrderMatchParam.Provider}" Height="20" ItemsSource="{Binding ProviderDropDownList}" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True"  Width="300" hc:InfoElement.TitleWidth="80" hc:InfoElement.Placeholder="请选择供应商" hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="供应商：" hc:InfoElement.Necessary="False" Margin="0"  >
                            </hc:ComboBox>
                        </hc:Col>
                    </hc:Row>
                    <hc:Row Height="30" Margin="5">
                        <hc:Col Span="12">
                            <hc:TextBox Text="{Binding OrderMatchParam.JoinTime,StringFormat='{}{0:yyyy-MM-dd HH:mm:ss}'}"  Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="300" hc:InfoElement.TitleWidth="80" IsEnabled="False" hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="称毛时间：" Margin="0"/>
                        </hc:Col>
                        <hc:Col Span="12">
                            <hc:TextBox Text="{Binding OrderMatchParam.OutTime,StringFormat='{}{0:yyyy-MM-dd HH:mm:ss}'}"  Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="300" hc:InfoElement.TitleWidth="80" IsEnabled="False" hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="称皮时间："   Margin="0"/>
                        </hc:Col>
                    </hc:Row>
                    <hc:Row Height="30" Margin="5">
                        <hc:Col Span="12">
                            <hc:TextBox Text="{Binding OrderMatchParam.OrderTotalWeight}"  Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="300" hc:InfoElement.TitleWidth="80" IsEnabled="False" hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="毛重（吨）：" Margin="0"/>
                        </hc:Col>
                        <hc:Col Span="12">
                            <hc:TextBox Text="{Binding OrderMatchParam.OrderTruckWeight}"  Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="300" hc:InfoElement.TitleWidth="80" IsEnabled="False" hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="皮重（吨）："   Margin="0"/>
                        </hc:Col>
                    </hc:Row>
                    <hc:Row Height="30" Margin="5">
                        <hc:Col Span="12">
                            <hc:TextBox Text="{Binding OrderMatchParam.OrderGoodsWeight}"  Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="300" hc:InfoElement.TitleWidth="80" IsEnabled="False" hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="净重（吨）：" Margin="0"/>
                        </hc:Col>
                        <hc:Col Span="12">
                            <hc:TextBox Text="{Binding OrderMatchParam.TypeName }" Name="txb_typename"  IsEnabled="False" Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="300" hc:InfoElement.TitleWidth="80"  hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="材料类别："   Margin="0"/>
                        </hc:Col>
                    </hc:Row>
                    <hc:Row Height="40" Margin="5">
                        <hc:Col Span="24">
                            <hc:TextBox TextWrapping="Wrap" AcceptsReturn="True" Text="{Binding OrderMatchParam.Remark}"  Height="40" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="670" hc:InfoElement.TitleWidth="80" hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="备注：" Margin="0"/>
                        </hc:Col>
                    </hc:Row>
                    <ItemsControl ItemsSource="{Binding OrderMatchGoods}" Width="738" >
                        <ItemsControl.ItemTemplate>
                            <DataTemplate >
                                <Border BorderBrush="LightGray" BorderThickness="1" Margin="5">
                                    <StackPanel>
                                        <hc:Row Height="30" Margin="5">
                                            <hc:Col Span="12">
                                                <hc:ComboBox SelectedValuePath="Key" DisplayMemberPath="Value"   SelectedItem="{Binding Goods}" Height="20" ItemsSource="{Binding Path=DataContext.GoodsDropDownList,RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type ItemsControl}}}" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True"  Width="300" hc:InfoElement.TitleWidth="80" hc:InfoElement.Placeholder="请选择材料" hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="材料明细：" hc:InfoElement.Necessary="True" Margin="0"  >
                                                    <hc:Interaction.Triggers>
                                                        <hc:EventTrigger EventName="SelectionChanged">
                                                            <hc:InvokeCommandAction Command="{Binding Path=DataContext.SelectedGoodsClick,RelativeSource={RelativeSource FindAncestor,AncestorLevel=2,AncestorType={x:Type ItemsControl}}}" CommandParameter="{Binding}" />
                                                        </hc:EventTrigger>
                                                    </hc:Interaction.Triggers>
                                                </hc:ComboBox>
                                            </hc:Col>
                                            <hc:Col Span="12">
                                                <hc:TextBox Text="{Binding Specifications}"  Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="300" hc:InfoElement.TitleWidth="80" IsEnabled="False"  hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="规格型号："   Margin="0">
                                                </hc:TextBox>
                                            </hc:Col>
                                        </hc:Row>
                                        <hc:Row Height="30" Margin="5">
                                            <hc:Col Span="12">
                                                <hc:TextBox Text="{Binding UnitName}"  Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="300" hc:InfoElement.TitleWidth="80" IsEnabled="False" hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="单位："   Margin="0"/>
                                            </hc:Col>
                                            <hc:Col Span="12">
                                                <hc:TextBox Text="{Binding RateText}"  Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="300" hc:InfoElement.TitleWidth="80" IsEnabled="False" hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="换算系数："   Margin="0"/>
                                            </hc:Col>
                                        </hc:Row>
                                        <hc:Row Height="30" Margin="5">
                                            <hc:Col Span="12">
                                                <hc:TextBox Text="{Binding GoodsPlanOnPcsStr}"  InputScope="Number" PreviewTextInput="PreviewTextInput" hc:InfoElement.Necessary="True"  Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="300" hc:InfoElement.TitleWidth="80"  hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="运单数量："   Margin="0">
                                                    <hc:Interaction.Triggers>
                                                        <hc:EventTrigger EventName="LostFocus">
                                                            <hc:InvokeCommandAction Command="{Binding Path=DataContext.TextChangeClick,RelativeSource={RelativeSource FindAncestor,AncestorLevel=1,AncestorType={x:Type ItemsControl}}}" CommandParameter="{Binding}" />
                                                        </hc:EventTrigger>
                                                    </hc:Interaction.Triggers>
                                                </hc:TextBox>
                                            </hc:Col>
                                            <hc:Col Span="12">
                                                <hc:TextBox Text="{Binding GoodsPlanOnWeight}"  Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"  hc:InfoElement.ShowClearButton="True" Width="300" hc:InfoElement.TitleWidth="80" IsEnabled="False" hc:InfoElement.TitlePlacement="Left" hc:InfoElement.Title="运单重量："   Margin="0"/>
                                            </hc:Col>
                                        </hc:Row>
                                        <hc:Row Height="40" Margin="5">
                                            <hc:Col Span="24">
                                                <Button Content="删除" Margin="10" VerticalAlignment="Center" Height="30" Command="{Binding Path=DataContext.DelGoodsClick,RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type ItemsControl}}}" CommandParameter="{Binding}"  HorizontalAlignment="Right"  Width="70" Style="{StaticResource ButtonDanger}"/>
                                            </hc:Col>
                                        </hc:Row>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <hc:Row Height="50" Margin="0">
                        <hc:Col Span="24">
                            <Button Content="添加材料" Margin="10" Height="30" Command="{Binding AddGoodsClick}" Name="btnAddGoods" HorizontalAlignment="Center"  Width="70"  />
                        </hc:Col>
                    </hc:Row>
                    <hc:Row Height="30" Margin="0,10,0,0">
                        <hc:Col Span="12">
                            <Label BorderBrush="Transparent" HorizontalAlignment="Left">进场照片</Label>
                        </hc:Col>
                        <hc:Col Span="12">
                            <Label BorderBrush="Transparent" HorizontalAlignment="Left">出场照片</Label>
                        </hc:Col>
                    </hc:Row>
                    <hc:Row  Margin="0,0,0,0">
                        <hc:Col Span="12">
                            <UniformGrid Rows="2" Columns="2" Width="370" Height="220" Margin="0" Background="Transparent" HorizontalAlignment="Center" x:Name="ug_JoinPics">
                                <Image Stretch="Fill" Height="100" Width="180" Margin="5" Source="{Binding JoinImageSources[0]}"  MouseDown="img_MouseDown"  x:Name="img_JoinPic_0" HorizontalAlignment="Left"/>
                                <Image Stretch="Fill" Height="100" Width="180" Margin="5" Source="{Binding JoinImageSources[1]}" MouseDown="img_MouseDown" x:Name="img_JoinPic_1" HorizontalAlignment="Right"/>
                                <Image Stretch="Fill" Height="100" Width="180" Margin="5" Source="{Binding JoinImageSources[2]}" MouseDown="img_MouseDown" x:Name="img_JoinPic_2" HorizontalAlignment="Left"/>
                                <Image Stretch="Fill" Height="100" Width="180" Margin="5" Source="{Binding JoinImageSources[3]}" MouseDown="img_MouseDown" x:Name="img_JoinPic_3" HorizontalAlignment="Right"/>
                            </UniformGrid>
                        </hc:Col>
                        <hc:Col Span="12">
                            <UniformGrid Rows="2" Columns="2" Width="370" Height="220" Margin="0" Background="Transparent" HorizontalAlignment="Center"  >
                                <Image Stretch="Fill" Height="100" Width="180" Margin="5" Source="{Binding OutImageSources[0]}"  MouseDown="img_MouseDown"   HorizontalAlignment="Left"/>
                                <Image Stretch="Fill" Height="100" Width="180" Margin="5" Source="{Binding OutImageSources[1]}" MouseDown="img_MouseDown"  HorizontalAlignment="Right"/>
                                <Image Stretch="Fill" Height="100" Width="180" Margin="5" Source="{Binding OutImageSources[2]}" MouseDown="img_MouseDown"  HorizontalAlignment="Left"/>
                                <Image Stretch="Fill" Height="100" Width="180" Margin="5" Source="{Binding OutImageSources[3]}" MouseDown="img_MouseDown"  HorizontalAlignment="Right"/>
                            </UniformGrid>
                        </hc:Col>
                    </hc:Row>
                    <hc:Row Height="20" Margin="5">
                        <hc:Col Span="24">
                            <Label BorderBrush="Transparent" HorizontalAlignment="Left">运单照片</Label>
                        </hc:Col>
                    </hc:Row>
                    <hc:Row Height="180" Margin="0,5,0,0">
                        <hc:Col Span="9">
                            <hc:UniformSpacingPanel Spacing="5" Orientation="Horizontal" HorizontalAlignment="Right">
                                <Image  Name="imgCapture"  Stretch="Fill"  MouseDown="img_MouseDown" Height="180" Width="260"/>
                                <WindowsFormsHost Height="180" Width="260"  Margin="10,0,5,0" HorizontalAlignment="Right"  x:Name="wfi_autoEdit_Vedio_Player">
                                    <aforge:VideoSourcePlayer x:Name="vsp_auto_Vedio_Player"/>
                                </WindowsFormsHost>
                            </hc:UniformSpacingPanel>
                        </hc:Col>
                        <hc:Col Span="15">
                            <Button Content="拍照" Margin="10" Click="btn_Photo_Click" Name="btnPhoto"   HorizontalAlignment="Left"  Width="70" Style="{StaticResource ButtonInfo}"/>
                        </hc:Col>
                    </hc:Row>
                    <hc:Row Height="50" Margin="0"  VerticalAlignment="Bottom">
                        <hc:Col Span="12">
                            <Button Content="取消" Margin="10" Click="btn_close_Click"  HorizontalAlignment="Right" Width="70" />
                        </hc:Col>
                        <hc:Col Span="12">
                            <Button Content="确定" Margin="10" Click="btn_ok_Click"   HorizontalAlignment="Left"  Width="70" Style="{StaticResource ButtonPrimary}"/>
                        </hc:Col>
                    </hc:Row>
                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Border>
</Window>
